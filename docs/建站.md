#  Docsify 网站，并使用 Docker 和 GitHub Actions 实现持续集成和持续部署（CI/CD）。项目还包括设置 Nginx 反向代理和使用 Watchtower 实现 Docker 容器的自动更新
## 技术栈
- Docsify：一个轻量级的静态网站生成器，用于快速搭建文档网站。
- Docker：用于将应用容器化，以确保一致的运行环境。
- GitHub Actions：用于持续集成和持续部署，自动化构建和推送 Docker 镜像。
- Nginx：作为反向代理服务器，用于处理客户端请求和负载均衡。
- Watchtower：用于监控 Docker 镜像更新并自动重新部署容器。
- 阿里云镜像仓库：存储和管理 Docker 镜像。
- Linux：服务器操作系统（CentOS 8.0）。

## 1. 准备 Docsify 项目
首先，确保 Docsify 项目已经准备好。如果还没有，可以通过以下步骤创建一个新的 Docsify 项目：

    # 安装 docsify-cli 工具
    npm install -g docsify-cli
    
    # 初始化一个新的 docsify 项目
    docsify init ./docs
这将创建一个 docs 文件夹，其中包含 Docsify 的基本配置和示例文档。
## 2. 创建 Dockerfile
在 Docsify 项目的根目录下创建一个 Dockerfile，用于定义如何构建 Docsify 镜像。以下是一个示例 Dockerfile：

    # 使用官方 Node.js 镜像作为基础镜像
    FROM node:16
    
    # 设置工作目录
    WORKDIR /app
    
    # 复制当前目录内容到容器的工作目录
    COPY . .
    
    # 安装 docsify-cli 工具
    RUN npm install -g docsify-cli
    
    # 暴露端口
    EXPOSE 3000
    
    # 启动 docsify 服务
    CMD ["docsify", "serve", "./docs"]

## 3. 创建 GitHub Actions 工作流
在项目中创建一个 GitHub Actions 工作流文件 .github/workflows/docker-image.yml，用于自动构建和推送 Docker 镜像。以下是一个示例工作流文件：

    name: Build and Push Docker Image
    
    on:
    push:
    branches:
    - main
    
    jobs:
    build:
    runs-on: ubuntu-latest
    
        steps:
        - name: Checkout code
          uses: actions/checkout@v2
    
        - name: Set up Docker Buildx
          uses: docker/setup-buildx-action@v1
    
        - name: Login to Docker Hub
          uses: docker/login-action@v2
          with:
            username: ${{ secrets.DOCKER_USERNAME }}
            password: ${{ secrets.DOCKER_PASSWORD }}
    
        - name: Build and push Docker image
          uses: docker/build-push-action@v2
          with:
            context: .
            push: true
            tags: ${{ secrets.DOCKER_USERNAME }}/docsify:latest

确保在 GitHub 仓库的 "Settings" -> "Secrets" 中添加 Docker Hub 的用户名和密码作为 DOCKER_USERNAME 和 DOCKER_PASSWORD。
## 4. 在 Docker 主机上安装 Watchtower
在 Docker 主机上，使用以下命令启动 Watchtower，以便自动更新 Docsify 容器：

    docker run -d \
    --name watchtower \
    -v /var/run/docker.sock:/var/run/docker.sock \
    containrrr/watchtower

Watchtower 将监视所有容器，并在发现新的镜像版本时自动更新它们。

## 5. 部署 Docsify 容器
在 Docker 主机上运行以下命令，部署 Docsify 容器：

    docker run -d \
    --name docsify \
    -p 3000:3000 \
    your_dockerhub_username/docsify:latest

## 总结
通过上述步骤，您已经实现了以下目标：
准备了 Docsify 项目并创建了 Dockerfile。
使用 GitHub Actions 实现了自动构建和推送 Docker 镜像。
在 Docker 主机上安装了 Watchtower，实现了镜像的自动更新。
部署了 Docsify 容器。