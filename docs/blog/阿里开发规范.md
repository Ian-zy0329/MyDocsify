以下是《阿里巴巴 Java 开发手册》中一些**最重要**且**开发中经常遇到**的规范，它们涵盖了代码质量、性能优化、安全性等多个方面，并且是开发过程中常见的痛点和难点。

### 1. **命名规范**
- **强制性**：避免使用拼音和英文混合的命名方式，避免使用单个字母命名。
  > **例子**：`alibaba` 或 `luoji`（逻辑）都不推荐，应该使用英文单词，且保持一致性，如 `logic`。

- **推荐性**：方法名、类名、变量名应当体现其功能，避免冗长的描述，使用具有实际意义的名称。
  > **例子**：`getData()` 这种通用方法名不推荐，建议使用 `getUserData()` 等具有明确含义的命名。

### 2. **日志与异常处理**
- **强制性**：避免直接抛出 `Exception`，必须抛出具体异常。
  > **例子**：不推荐：`throw new Exception("Error");`，应改为：`throw new IllegalArgumentException("Invalid argument");`。

- **强制性**：`catch` 异常时，必须处理异常，不能只 `catch` 不处理，也不能吞掉异常。
  > **例子**：不要简单地 `catch (Exception e)` 后什么都不做，应该至少记录日志或抛出异常。

- **推荐性**：日志打印时要使用占位符，避免字符串拼接带来的性能损耗。
  > **例子**：推荐使用 `logger.info("Order ID: {} created", orderId);`，而不是 `logger.info("Order ID: " + orderId + " created");`。

### 3. **集合处理**
- **强制性**：在使用 `List` 或 `Set` 等集合时，必须指定集合的初始大小，以避免集合自动扩容带来的性能问题。
  > **例子**：`List<String> list = new ArrayList<>(100);`。

- **推荐性**：使用 `keySet()` 遍历 `Map` 时，应该使用 `entrySet()` 遍历效率更高。
  > **例子**：使用 `for (Map.Entry<K, V> entry : map.entrySet())`，而不是 `for (K key : map.keySet())`。

- **强制性**：在集合中使用 `subList()` 方法时，必须注意`subList`返回的是原集合的视图，如果对视图进行修改，可能会影响原集合，使用后需要注意清理。
  > **例子**：在对 `subList` 结果进行操作时需谨慎使用，因为可能影响原列表。

### 4. **SQL 规范**
- **强制性**：不得使用 `SELECT *`，应明确查询列，避免查询不必要的字段带来性能问题。
  > **例子**：`SELECT id, name FROM users` 而不是 `SELECT * FROM users`。

- **强制性**：在 SQL 中 `IN` 操作符的参数数量必须控制在合理范围内，过多参数会导致索引失效、全表扫描。
  > **推荐做法**：如果参数很多，建议使用批量查询或者将数据存入临时表中，减少 IN 的参数数量。

- **推荐性**：数据库表的字段必须设置默认值，避免数据为空时产生意外的行为。
  > **例子**：`status` 字段默认值应设置为 `0` 或其他业务约定的默认状态。

### 5. **并发处理**
- **强制性**：使用线程池时，禁止使用 `Executors` 创建线程池，而应通过 `ThreadPoolExecutor` 来创建线程池，避免默认的 `FixedThreadPool` 或 `CachedThreadPool` 可能导致 OOM。
  > **例子**：`Executors.newFixedThreadPool()` 会创建无界队列，推荐通过 `new ThreadPoolExecutor()` 设置合理的队列长度。

- **推荐性**：在高并发环境中，尽量减少锁的粒度，避免长时间持有锁。
  > **推荐做法**：对关键共享资源加锁，非关键部分可以避免加锁，从而提升并发性能。

- **强制性**：避免在 `finally` 块中使用 `return` 或 `throw` 语句，因为 `finally` 块的执行时间应当尽量短且确定。
  > **例子**：在 `finally` 中不能抛出异常，这会掩盖原本的异常。

### 6. **性能优化**
- **强制性**：避免在循环中进行数据库查询或更新操作，应该尽量将数据批量查询或批量更新。
  > **例子**：将 `for` 循环中的 SQL 语句移到循环外，使用批量处理，如批量插入、批量更新。

- **推荐性**：在大量操作字符串时，尽量使用 `StringBuilder` 或 `StringBuffer`，而不是 `+` 进行字符串拼接。
  > **例子**：`StringBuilder sb = new StringBuilder(); sb.append("a").append("b");` 而不是 `String s = "a" + "b";`。

- **强制性**：在高性能场景中，避免频繁创建对象，尽量使用对象池或缓存来重复利用对象。
  > **例子**：对于频繁使用的对象如数据库连接、线程、文件句柄等，建议使用对象池。

### 7. **单元测试**
- **强制性**：单元测试必须覆盖到正常场景、异常场景以及边界条件，确保程序的稳定性。
  > **例子**：对于每个关键的功能模块，测试用例至少包含 70% 以上的代码覆盖率。

- **推荐性**：不要在单元测试中依赖外部服务或数据库，应尽量使用 Mock 或者 Stub 来模拟外部依赖。
  > **例子**：使用 `Mockito` 进行依赖模拟，不依赖真实的数据库、网络服务等外部资源。

### 8. **代码结构**
- **强制性**：一个方法的行数不得超过 80 行，超过应将代码进行拆分，保证单一方法的职责明确。
  > **推荐做法**：通过重构方法，将复杂逻辑拆分成多个小方法，提高可读性和可维护性。

- **推荐性**：尽量避免使用过深的嵌套结构，嵌套层次应控制在 3 层以内，以提升代码的可读性。
  > **推荐做法**：通过早退出、简化逻辑等方式，减少嵌套深度。
  